(this.webpackJsonpfullstack2020=this.webpackJsonpfullstack2020||[]).push([[0],{41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),u=n(17),i=n.n(u),o=n(2),s=n.n(o),d=n(5),l=n(4),f=n(6);function p(e){var t=e.value,n=e.handler;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:t,onChange:n})]})}function b(e){return Object(r.jsxs)("form",{onSubmit:e.submit,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:e.name,onChange:e.handleName})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:e.number,onChange:e.handleNumber})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})}function h(e){var t=e.persons,n=e.exclude;return Object(r.jsx)("div",{children:t.map((function(e){return Object(r.jsxs)("div",{children:[e.name," - ",e.number," -",Object(r.jsx)("button",{onClick:function(){return n(e.id)},children:"delete"})]},e.id)}))})}var j=n(7),x=n.n(j),m="/api/persons";function v(){return(v=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.a.get(m).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.a.post(m,t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.a.put("".concat(m,"/").concat(t.id),t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.a.delete("".concat(m,"/").concat(t)).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k={getAll:function(){return v.apply(this,arguments)},save:function(e){return O.apply(this,arguments)},remove:function(e){return w.apply(this,arguments)},update:function(e){return g.apply(this,arguments)}};var y=function(e){var t=e.message;if(null===t.text)return null;var n={fontSize:20,color:"green",padding:10,borderStyle:"solid",borderRadius:5,marginBottom:10,background:"lightgray"},a=Object(d.a)(Object(d.a)({},n),{},{color:"red"});return Object(r.jsx)("div",{style:t.error?a:n,children:t.text})};var S=function(e){var t=a.useState([]),n=Object(f.a)(t,2),c=n[0],u=n[1],i=a.useState(""),o=Object(f.a)(i,2),j=o[0],x=o[1],m=a.useState(""),v=Object(f.a)(m,2),O=v[0],g=v[1],w=a.useState(""),S=Object(f.a)(w,2),C=S[0],N=S[1],A=a.useState({text:null,error:!1}),F=Object(f.a)(A,2),I=F[0],B=F[1];function P(e,t){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,!n){e.next=9;break}return e.next=4,k.save(t);case 4:r=e.sent,r=c.concat(r),B({text:"Added ".concat(t.name),error:!1}),e.next=21;break;case 9:return r=c.filter((function(e){return e.id!==t.id})),e.prev=10,e.next=13,k.update(t);case 13:r=(r=e.sent).concat(r),B("Updated ".concat(t.name)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),404===e.t0.response.status&&B({text:"Information of ".concat(t.name," has already ")+"been removed from server",error:!0});case 21:return x(""),g(""),setTimeout((function(){return B({text:null,error:!1})}),5e3),e.abrupt("return",r);case 25:case"end":return e.stop()}}),e,null,[[10,18]])})))).apply(this,arguments)}var U=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),-1!==(n=c.findIndex((function(e){return e.name===j})))){e.next=11;break}return r={name:j,number:O},e.t0=u,e.next=7,P(r,!0);case 7:e.t1=e.sent,(0,e.t0)(e.t1),e.next=19;break;case 11:if(!window.confirm("".concat(j," is already added to phonebook. ")+"Replace the old number with a new one?")){e.next=19;break}return a=Object(d.a)(Object(d.a)({},c[n]),{},{number:O}),e.t2=u,e.next=17,P(a,!1);case 17:e.t3=e.sent,(0,e.t2)(e.t3);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=c.filter((function(e){return e.name.toUpperCase().includes(C.toUpperCase())}));return a.useEffect((function(){k.getAll().then((function(e){return u(e)}))}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(y,{message:I}),Object(r.jsx)(p,{value:C,handler:function(e){return N(e.target.value)}}),Object(r.jsx)("h2",{children:"Add a new"}),Object(r.jsx)(b,{submit:U,name:j,handleName:function(e){return x(e.target.value)},number:O,handleNumber:function(e){return g(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(h,{persons:D,exclude:function(e){k.remove(e),u(c.filter((function(t){return t.id!==e})))}})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,u=t.getTTFB;n(e),r(e),a(e),c(e),u(e)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(S,{})}),document.getElementById("root")),C()}},[[41,1,2]]]);
//# sourceMappingURL=main.da1f36f9.chunk.js.map